# Dockerfile Inseguro para Testes

# Usar uma imagem base desatualizada e não oficial
FROM ubuntu:14.04

# Manter o apt-get update e o apt-get install em comandos separados (práticas de caching inadequadas)
RUN apt-get update
RUN apt-get install -y wget

# Instalar pacotes desnecessários, alguns com vulnerabilidades conhecidas
RUN apt-get install -y \
    openssh-server \
    curl \
    build-essential \
    libssl-dev

# Copiar um script com permissões inseguras
COPY insecure-script.sh /usr/local/bin/insecure-script.sh
RUN chmod 777 /usr/local/bin/insecure-script.sh

# Executar comandos com usuário root
USER root

# Usar credenciais em texto claro
RUN echo 'root:rootpassword' | chpasswd

# Expor portas inseguras
EXPOSE 22
EXPOSE 80

# Definir variável de ambiente com informações sensíveis
ENV API_KEY='12345-ABCDE'

# Baixar e executar scripts diretamente da internet
RUN wget http://example.com/insecure-script.sh -O /tmp/insecure-script.sh
RUN chmod +x /tmp/insecure-script.sh
RUN /tmp/insecure-script.sh

# Configurar um ponto de entrada inseguro
ENTRYPOINT ["/bin/bash"]

# Copiar conteúdo potencialmente sensível para a imagem
COPY . /app

# Instruções adicionais inseguras podem ser adicionadas conforme necessário
